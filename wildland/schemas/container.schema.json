{
    "title": "Container manifest",
    "type": "object",
    "required": ["object", "owner", "paths", "backends", "version"],
    "dependencies": {
        "categories": ["title"]
    },
    "properties": {
        "object": { "const": "container"},
        "version": { "$ref": "/schemas/types.json#version"},
        "owner": { "$ref": "/schemas/types.json#fingerprint" },
        "paths": {
            "type": "array",
            "items": { "$ref": "/schemas/types.json#abs-path" },
            "minItems": 1,
            "description": "list of paths for this container, should start with a unique /.uuid/UUID path"
        },
        "title": {
            "type": ["string", "null"],
            "description": "Title of the container."
        },
        "categories": {
            "type": "array",
            "items": { "$ref": "/schemas/types.json#abs-path" },
            "minItems": 0,
            "description": "list of categories for this container. Requires title property."
        },
        "backends": {
            "type": "object",
            "required": ["storage"],
            "properties": {
                "storage": {
                    "type": "array",
                    "items": {
                        "oneOf": [
                            { "$ref": "/schemas/types.json#url" },
                            { "$ref": "/schemas/storage.schema.json#definitions/storage-inline" },
                            { "$ref": "/schemas/types.json#encrypted" }
                        ]
                    },
                    "description": "list of storage backend URLs, or inlined storage manifests"
                }
            },
            "additionalProperties": false
        },
        "access": {
            "$ref": "/schemas/types.json#access",
            "description": "access control; by default manifests are encrypted to their owner"
        }
    },
    "additionalProperties": false
}
