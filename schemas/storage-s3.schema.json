{
    "title": "Storage manifest (S3)",
    "allOf": [
        { "$ref": "storage.schema.json" },
        {
            "type": "object",
            "required": ["url", "credentials"],
            "properties": {
                "url": {
                    "type": "string",
                    "description": "S3 URL, in the s3://bucket/path format",
                    "pattern": "^s3://.*$"
                },
                "credentials": {
                    "type": "object",
                    "required": ["access_key", "secret_key"],
                    "properties": {
                        "access_key": {"type": "string"},
                        "secret_key": {"type": "string"}
                    },
                    "additionalProperties": false
                }
            }
        }
    ]
}
